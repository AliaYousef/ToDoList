document.getElementById("take").addEventListener("click", move);



var list = [];
var cunt = 0;

function move() {

  // create LI element 
  var li = document.createElement('LI');
  var inputValue = document.getElementById('checValue').value;
  if (inputValue === '') {
    alert("You must write something!");
  } else {
    var inputValueObj = [{
      value: document.getElementById('checValue').value,
      check: false,
      id: ++cunt
    }];
    var t = document.createTextNode(inputValue);
    list.push(inputValueObj);
    li.appendChild(t);

    li.setAttribute("class", "task");
    li.setAttribute("id", "task");
    document.getElementById("add").appendChild(li);
    document.getElementById('checValue').value = "";
    // add IMG at first
    var mylist = document.getElementsByTagName("li");
    var i;
    for (i = mylist.length - 1; i < mylist.length; i++) {
      var img3 = document.createElement("IMG");
      img3.setAttribute("src", "unchecked.png");
      img3.setAttribute("class", "img3");
      img3.setAttribute("id", "uncheched");
      img3.setAttribute("alt", "");
      mylist[i].appendChild(img3);
    }
    // add IMG at last
    for (i = mylist.length - 1; i < mylist.length; i++) {
      var img4 = document.createElement("IMG");
      img4.setAttribute("src", "close.png");
      img4.setAttribute("class", "img4");
      img4.setAttribute("id", "close");
      img4.setAttribute("alt", "");
      mylist[i].appendChild(img4);
    }
  }
  // close LI element on click
  var close = document.getElementsByClassName("img4");
  for (i = close.length - 1; i < close.length; i++) {
    close[i].onclick = function () {
      var li = this.parentElement;
      li.remove();
      var parentIndex = parIndex(list);
      list.splice(parentIndex, 1);
      var task = list.length;
      document.getElementById('num').innerHTML = task + "  " + "task left";
    }

    function parIndex(list) {
      for (i = close.length - 1; i < close.length; i++) {
        list.findIndex(function (list) {
          return list.id >= (i);
        });
      }
    }
    /// add cheched function 
    var checkList = document.getElementsByClassName("img3");
    for (i = checkList.length - 1; i < checkList.length; i++) {
      checkList[i].onclick = function (key) {
        
        var li = this.parentElement;
        console.log(list[i-2].id);
        if (li.check) {
          
          li.setAttribute("class", "task");
          li.check = false;
          checkList[(i - 2)].src = "unchecked.png";
        } else {
          li.setAttribute("class", "img3cheched");
          li.check = true;
          checkList[(i - 2)].src = "check.png"
        }
      };
    }

    var task = list.length;
    console.log(task)
    document.getElementById('num').innerHTML = task + "task left";
  }
  console.log(list);
}